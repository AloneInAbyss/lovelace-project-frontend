<app-header>
  <form class="space-y-6" [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate>
    <div>
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-envelope"></i>
        </p-inputgroup-addon>
        <input pInputText formControlName="email" type="email" placeholder="Email" />
      </p-inputgroup>

      @if (f['email'].invalid && (f['email'].dirty || f['email'].touched)) {
        <div class="text-sm text-red-600 mt-1">
          @if (f['email'].errors?.['required']) {
            <div>Email é obrigatório.</div>
          } @if (f['email'].errors?.['email']) {
            <div>Email inválido.</div>
          }
        </div>
      }
    </div>

    <div>
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-user"></i>
        </p-inputgroup-addon>
        <input pInputText formControlName="username" placeholder="Nome de usuário" />
      </p-inputgroup>

      @if (f['username'].invalid && (f['username'].dirty || f['username'].touched)) {
        <div class="text-sm text-red-600 mt-1">
          @if (f['username'].errors?.['required']) {
            <div>Nome de usuário é obrigatório.</div>
          } @if (f['username'].errors?.['minlength'] || f['username'].errors?.['maxlength']) {
            <div>Nome de usuário precisa ter entre 3 e 24 caracteres.</div>
          }
        </div>
      }
    </div>

    <div>
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-key"></i>
        </p-inputgroup-addon>
        <input pInputText type="password" formControlName="password" placeholder="Senha" />
      </p-inputgroup>

      @if (f['password'].invalid && (f['password'].dirty || f['password'].touched)) {
        <div class="text-sm text-red-600 mt-1">
          @if (f['password'].errors?.['required']) {
            <div>Senha é obrigatória.</div>
          } @if (f['password'].errors?.['minlength'] || f['password'].errors?.['maxlength']) {
            <div>Senha precisa ter entre 6 e 64 caracteres.</div>
          }
        </div>
      }
    </div>

    <div>
      <p-inputgroup>
        <p-inputgroup-addon>
          <i class="pi pi-key"></i>
        </p-inputgroup-addon>
        <input pInputText type="password" formControlName="passwordConfirm" placeholder="Confirmar senha" />
      </p-inputgroup>

      @if (registerForm.errors?.['passwordMismatch'] && (f['passwordConfirm'].dirty || f['passwordConfirm'].touched)) {
        <div class="text-sm text-red-600 mt-1">As senhas não coincidem.</div>
      }
    </div>

    <div class="flex flex-col gap-3">
      <button pButton type="submit" class="p-button p-component p-button-raised w-full" [disabled]="registerForm.invalid" [loading]="loading">
        Registrar
      </button>
    </div>
  </form>

  <div class="mt-6 text-center text-sm text-slate-600">
    <span>Já tem conta?</span>
    <p-button link routerLink="/login" label="Entrar" size="small" />
  </div>
</app-header>
