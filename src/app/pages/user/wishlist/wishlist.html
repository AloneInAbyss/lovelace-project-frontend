<main class="max-w-4xl mx-auto px-8 py-8">
	<h2 class="text-2xl font-semibold mb-2" i18n>Lista de Desejos</h2>
	<p class="text-gray-600 mb-6" i18n>Jogos que você está acompanhando</p>

  @if (loading) {
    <div class="flex items-center justify-center py-12">
      <i class="pi pi-spin pi-spinner text-4xl text-blue-500"></i>
    </div>
  } @else if (error) {
    <div class="flex items-center justify-center py-12">
      <p class="text-red-500" i18n>Erro ao carregar lista de desejos: {{ error }}</p>
    </div>
  } @else if (items.length === 0) {
    <div class="flex flex-col items-center justify-center py-12">
      <i class="pi pi-heart text-6xl text-gray-300 mb-4"></i>
      <p class="text-gray-500 text-lg" i18n>Sua lista de desejos está vazia</p>
      <p class="text-gray-400 text-sm mt-2" i18n>Adicione jogos à sua lista para acompanhar os melhores preços</p>
    </div>
  } @else {
    <div class="space-y-6">
      @for (it of items; track it.id) {
        <p-card class="p-2">
          <div class="flex items-center gap-4">
            <div class="w-32 h-32 rounded flex items-center justify-center text-white font-semibold text-2xl" [style.background]="getRandomColor(it.gameId)">
              {{ initials(it.gameName) }}
            </div>

            <div class="flex-1">
              <div class="flex items-start justify-between">
                <div>
                  <div class="text-lg font-semibold">{{ it.gameName }}</div>
                  <div class="text-sm text-gray-500" i18n>{{ getTotalAvailable(it) }} condições disponíveis</div>

                  <div class="mt-2 text-sm">
                    @if (getCheapestPrices(it).new) {
                      <div><strong i18n>Novo por {{ getCheapestPrices(it).new | currency }}</strong></div>
                    }
                    @if (getCheapestPrices(it).used) {
                      <div i18n>Usado por {{ getCheapestPrices(it).used | currency }}</div>
                    }
                    @if (getCheapestPrices(it).auction) {
                      <div i18n>Leilão por {{ getCheapestPrices(it).auction | currency }}</div>
                    }
                  </div>
                </div>

                <div class="flex flex-col items-end gap-3">
                  <button pButton type="button" severity="info" i18n-label label="Ver Anúncios" (click)="goToListings(it)"></button>
                  <button pButton type="button" severity="secondary" i18n-label label="Remover" (click)="remove(it)"></button>
                </div>
              </div>
            </div>
          </div>
        </p-card>
      }
    </div>
  }
</main>
